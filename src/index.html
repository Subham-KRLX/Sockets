<!DOCTYPE html>
<html>
  <body>
    <h2>Multi User Chat</h2>
    <input id="userId" placeholder="Enter your user ID" />
    <button id="registerBtn">Register</button>
    <br /><br />

    <h4>Private Message</h4>
    <input id="toUser" placeholder="To user ID" />
    <input id="privateMsg" placeholder="Message" />
    <button id="sendPrivate">Send</button>

    <h4>Group Chat</h4>
    <input id="roomName" placeholder="Room name" />
    <button id="joinRoom">Join Room</button>
    <input id="groupMsg" placeholder="Group message" />
    <button id="sendGroup">Send</button>

    <ul id="messages"></ul>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();

document.getElementById("registerBtn").onclick = () => {
  const userId = document.getElementById("userId");
  if (userId) {
    socket.emit("register", userId);
    addMessage(`You registered as ${userId}`);
  }
};

document.getElementById("sendPrivate").onclick = () => {
  const toUser = document.getElementById("toUser");
  const message = document.getElementById("privateMsg");
  if (toUser && message) {
    socket.emit("privateMessage", { toUser, message });
    addMessage(`Private to ${toUser}: ${message}`);
  }
};

document.getElementById("joinRoom").onclick = () => {
  const roomName = document.getElementById("roomName");
  if (roomName) {
    socket.emit("joinRoom", roomName);
    addMessage(`Joined room ${roomName}`);
  }
};

document.getElementById("sendGroup").onclick = () => {
  const roomName = document.getElementById("roomName");
  const message = document.getElementById("groupMsg");
  if (roomName && message) {
    socket.emit("groupMessage", { roomName, message });
    addMessage(`Group ${roomName}: ${message}`);
  }
};
socket.on("privateMessage", ({ fromUser, message }) => {
  addMessage(`Private from ${fromUser}: ${message}`);
});

socket.on("groupMessage", ({ roomName, fromUser, message }) => {
  addMessage(`Group ${roomName} from ${fromUser}: ${message}`);
});


      function addMessage(msg) {
        const li = document.createElement("li");
        li.textContent = msg;
        document.getElementById("messages").appendChild(li);
      }
    </script>
  </body>
</html>
